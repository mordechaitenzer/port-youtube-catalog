name: Ingest Youtube Playlist to Port
on:
  workflow_dispatch:

jobs:
  ingest-to-port:
    runs-on: ubuntu-latest
    steps:
      - name: Bulk Upsert Playlist and Videos
        uses: port-labs/port-github-action@v1
        with:
          clientId: ${{ secrets.PORT_CLIENT_ID }}
          clientSecret: ${{ secrets.PORT_CLIENT_SECRET }}
          operation: BULK_UPSERT
          entities: |
            [
              {
                "identifier": "awesome_opposite_keys_playlist",
                "blueprint": "youtube_playlist",
                "title": "Awesome songs in opposite keys",
                "properties": {
                  "link": "https://www.youtube.com/playlist?list=PL5ErBr2d3QJH0kbwTQ7HSuzvBb4zIWzhy",
                  "videoCount": 53
                }
              },
              {
                "identifier": "v1",
                "blueprint": "youtube_video",
                "title": "The Pink Panther Theme (Major Key)",
                "properties": {
                  "title": "The Pink Panther Theme (Major Key)",
                  "link": "https://youtu.be/2BkEorFwJGg",
                  "views": 150000,
                  "titleLength": 32,
                  "descriptionWordCount": 250,
                  "durationSeconds": 145,
                  "isOfficialSource": true,
                  "hasCustomThumbnail": true,
                  "hasChapters": true
                },
                "relations": {"playlist": "awesome_opposite_keys_playlist"}
              },
              {
                "identifier": "v2",
                "blueprint": "youtube_video",
                "title": "Pokémon Theme (Minor Key Edit)",
                "properties": {
                  "title": "Pokémon Theme (Minor Key Edit)",
                  "link": "https://youtu.be/v_O6VfXvBf0",
                  "views": 85000,
                  "titleLength": 28,
                  "descriptionWordCount": 120,
                  "durationSeconds": 190,
                  "isOfficialSource": false,
                  "hasCustomThumbnail": true,
                  "hasChapters": false
                },
                "relations": {"playlist": "awesome_opposite_keys_playlist"}
              },
              {
                "identifier": "v3",
                "blueprint": "youtube_video",
                "title": "Super Mario Bros Theme (Minor Key)",
                "properties": {
                  "title": "Super Mario Bros Theme (Minor Key)",
                  "link": "https://youtu.be/u_PSTpAn0pI",
                  "views": 125000,
                  "titleLength": 36,
                  "descriptionWordCount": 210,
                  "durationSeconds": 110,
                  "isOfficialSource": true,
                  "hasCustomThumbnail": true,
                  "hasChapters": true
                },
                "relations": {"playlist": "awesome_opposite_keys_playlist"}
              },
              {
                "identifier": "v4",
                "blueprint": "youtube_video",
                "title": "Harry Potter Hedwig's Theme (Major)",
                "properties": {
                  "title": "Harry Potter Hedwig's Theme (Major)",
                  "link": "https://youtu.be/j72vS89Y_p4",
                  "views": 98000,
                  "titleLength": 35,
                  "descriptionWordCount": 85,
                  "durationSeconds": 240,
                  "isOfficialSource": true,
                  "hasCustomThumbnail": false,
                  "hasChapters": false
                },
                "relations": {"playlist": "awesome_opposite_keys_playlist"}
              },
              {
                "identifier": "v20",
                "blueprint": "youtube_video",
                "title": "Long SEO Test Video Title",
                "properties": {
                  "title": "Long SEO Test Video Title",
                  "link": "https://youtu.be/test20",
                  "views": 5000,
                  "titleLength": 105,
                  "descriptionWordCount": 40,
                  "durationSeconds": 450,
                  "isOfficialSource": false,
                  "hasCustomThumbnail": false,
                  "hasChapters": false
                },
                "relations": {"playlist": "awesome_opposite_keys_playlist"}
              }
            ]
